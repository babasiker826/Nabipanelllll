<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ã–ZSOY Sorgu Paneli</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  /* DARK MODE BACKGROUND */
  body {
    background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #2e1065 100%);
    color: #e2e8f0;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    margin: 0;
    padding: 0;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* GRID BACKGROUND */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
      linear-gradient(rgba(255, 255, 255, 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 255, 255, 0.02) 1px, transparent 1px);
    background-size: 40px 40px;
    z-index: -2;
  }

  /* GRADIENT OVERLAY */
  body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background:
      radial-gradient(circle at 20% 30%, rgba(255, 77, 255, 0.08) 0%, transparent 50%),
      radial-gradient(circle at 80% 70%, rgba(77, 121, 255, 0.06) 0%, transparent 50%);
    z-index: -1;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
  }

  /* SIDEBAR - MODERN DARK */
  #sidebar {
    width: 280px;
    background: rgba(26, 26, 46, 0.95);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border-right: 1px solid rgba(0, 230, 255, 0.3);
    position: fixed;
    top: 0;
    left: -280px;
    height: 100vh;
    z-index: 9999;
    transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow-y: auto;
    box-shadow: 5px 0 30px rgba(0, 0, 0, 0.5);
  }

  #sidebar.active {
    left: 0;
  }

  /* Sidebar Header */
  .sidebar-header {
    padding: 25px 20px;
    border-bottom: 1px solid rgba(0, 230, 255, 0.2);
    display: flex;
    align-items: center;
    gap: 15px;
    background: linear-gradient(90deg, rgba(0, 230, 255, 0.1), transparent);
  }

  .user-avatar {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    border: 3px solid;
    border-image: linear-gradient(45deg, #00e6ff, #8b5cf6) 1;
    padding: 2px;
  }

  .user-info {
    flex: 1;
  }

  .username {
    font-size: 18px;
    font-weight: 700;
    color: white;
    margin-bottom: 5px;
  }

  .user-plan {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(90deg, rgba(0, 230, 255, 0.2), rgba(139, 92, 246, 0.2));
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
    color: #00e6ff;
  }

  /* Profile Status Indicator */
  .profile-status {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 8px;
    font-size: 11px;
  }

  .status-online {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background-color: #10b981;
    box-shadow: 0 0 8px #10b981;
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0% { opacity: 0.7; }
    50% { opacity: 1; }
    100% { opacity: 0.7; }
  }

  /* Navigation */
  .nav-section {
    padding: 20px 0;
  }

  .section-title {
    padding: 0 20px 10px;
    font-size: 11px;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: #8b5cf6;
    font-weight: 700;
    border-bottom: 1px solid rgba(139, 92, 246, 0.3);
    margin-bottom: 10px;
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px 20px;
    color: #94a3b8;
    text-decoration: none;
    transition: all 0.3s;
    cursor: pointer;
    position: relative;
  }

  .nav-item:hover {
    background: rgba(255, 255, 255, 0.05);
    color: #00e6ff;
    padding-left: 25px;
  }

  .nav-item.active {
    background: linear-gradient(90deg, rgba(0, 230, 255, 0.1), transparent);
    color: #00e6ff;
    border-left: 3px solid #00e6ff;
  }

  .nav-icon {
    width: 20px;
    text-align: center;
    font-size: 16px;
  }

  .nav-text {
    flex: 1;
    font-size: 14px;
    font-weight: 500;
  }

  .nav-badge {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    font-size: 10px;
    padding: 3px 8px;
    border-radius: 10px;
    font-weight: 700;
  }

  .nav-badge.free {
    background: linear-gradient(135deg, #10b981, #059669);
  }

  .nav-badge.danger {
    background: linear-gradient(135deg, #ef4444, #dc2626);
  }

  /* Submenu */
  .submenu {
    background: rgba(16, 16, 32, 0.8);
    border-left: 2px solid rgba(0, 230, 255, 0.2);
    margin-left: 20px;
    display: none;
  }

  .submenu.active {
    display: block;
  }

  .submenu-item {
    padding: 12px 20px 12px 40px;
    color: #94a3b8;
    text-decoration: none;
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 13px;
    transition: all 0.2s;
  }

  .submenu-item:hover {
    background: rgba(255, 255, 255, 0.03);
    color: #00e6ff;
  }

  /* Overlay */
  #sidebar-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 9998;
    display: none;
  }

  #sidebar-overlay.active {
    display: block;
  }

  /* Top Actions - Modern */
  .top-actions {
    position: fixed;
    top: 20px;
    left: 20px;
    right: 20px;
    z-index: 10000;
    display: flex;
    justify-content: space-between;
  }

  .action-btn {
    width: 50px;
    height: 50px;
    border-radius: 15px;
    background: linear-gradient(135deg, rgba(0, 230, 255, 0.2), rgba(139, 92, 246, 0.2));
    border: 1px solid rgba(0, 230, 255, 0.3);
    backdrop-filter: blur(10px);
    color: #00e6ff;
    font-size: 20px;
    cursor: pointer;
    transition: all 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 20px rgba(0, 230, 255, 0.3);
    border-color: #00e6ff;
  }

  .action-label {
    font-size: 11px;
    color: #94a3b8;
    text-align: center;
    margin-top: 5px;
    font-weight: 600;
  }

  /* Main Content */
  .main-content {
    margin-left: 0;
    transition: margin-left 0.3s;
  }

  .main-content.sidebar-open {
    margin-left: 280px;
  }

  /* DASHBOARD STYLES FROM 2nd HTML */
  /* Auth Check Overlay */
  .auth-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(10, 10, 15, 0.95);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.5s ease;
  }

  .auth-overlay.hidden {
    opacity: 0;
    pointer-events: none;
  }

  .auth-spinner {
    width: 60px;
    height: 60px;
    border: 4px solid rgba(0, 230, 255, 0.3);
    border-top: 4px solid #00e6ff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Dashboard Header - ENHANCED */
  .dashboard-header {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 30px;
    margin-bottom: 30px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
  }

  .dashboard-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 5px;
    background: linear-gradient(90deg, #00e6ff, #8b5cf6, #ec4899);
  }

  .dashboard-title {
    font-size: 3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #00e6ff, #8b5cf6, #ec4899);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 10px;
    text-shadow: 0 0 30px rgba(0, 230, 255, 0.3);
  }

  .dashboard-subtitle {
    font-size: 1.2rem;
    color: #94a3b8;
    max-width: 800px;
    line-height: 1.6;
  }

  /* Role Warning */
  .role-warning {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.15), rgba(245, 158, 11, 0.25));
    padding: 20px;
    border-radius: 15px;
    margin: 25px 0;
    border-left: 5px solid #f59e0b;
    display: flex;
    align-items: center;
    gap: 15px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(245, 158, 11, 0.3);
  }

  .role-warning i {
    color: #f59e0b;
    font-size: 24px;
  }

  .upgrade-button {
    background: linear-gradient(135deg, #f59e0b, #fbbf24);
    color: #000;
    border: none;
    border-radius: 12px;
    padding: 12px 25px;
    font-size: 14px;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    margin-left: auto;
    box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
  }

  .upgrade-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(245, 158, 11, 0.5);
  }

  /* Stats Grid - ENHANCED */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    border-radius: 20px;
    padding: 30px;
    transition: all 0.4s ease;
    position: relative;
    overflow: hidden;
  }

  .stat-card:hover {
    transform: translateY(-10px);
    border-color: rgba(0, 230, 255, 0.3);
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
  }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(0, 230, 255, 0.05), transparent);
    z-index: -1;
  }

  .card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 20px;
  }

  .card-icon {
    width: 60px;
    height: 60px;
    border-radius: 15px;
    background: linear-gradient(135deg, rgba(0, 230, 255, 0.2), rgba(139, 92, 246, 0.2));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 28px;
    color: #00e6ff;
    box-shadow: 0 0 20px rgba(0, 230, 255, 0.3);
  }

  .card-change {
    font-size: 14px;
    color: #10b981;
    font-weight: 700;
    background: rgba(16, 185, 129, 0.1);
    padding: 8px 15px;
    border-radius: 20px;
    border: 1px solid rgba(16, 185, 129, 0.3);
  }

  .card-value {
    font-size: 3.5rem;
    font-weight: 900;
    margin-bottom: 10px;
    color: white;
    text-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
  }

  .card-label {
    color: #94a3b8;
    font-size: 16px;
    font-weight: 600;
  }

  /* Quick Actions */
  .quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 40px;
  }

  .quick-btn {
    background: linear-gradient(135deg, rgba(0, 230, 255, 0.1), rgba(139, 92, 246, 0.1));
    border: 1px solid rgba(0, 230, 255, 0.2);
    border-radius: 15px;
    padding: 25px;
    color: #00e6ff;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    text-align: center;
    backdrop-filter: blur(10px);
  }

  .quick-btn:hover {
    background: linear-gradient(135deg, rgba(0, 230, 255, 0.2), rgba(139, 92, 246, 0.2));
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0, 230, 255, 0.2);
  }

  /* Recent Activity */
  .results-container {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 30px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
    margin-top: 40px;
  }

  .results-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 25px;
    padding-bottom: 20px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  }

  .results-title {
    font-size: 1.8rem;
    font-weight: 800;
    color: white;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .results-title i {
    color: #10b981;
  }

  .api-info {
    font-size: 14px;
    color: #94a3b8;
    background: rgba(59, 130, 246, 0.15);
    padding: 8px 15px;
    border-radius: 10px;
    border: 1px solid rgba(59, 130, 246, 0.3);
  }

  .loading {
    text-align: center;
    padding: 40px;
    color: #00e6ff;
  }

  .loading-spinner {
    width: 50px;
    height: 50px;
    border: 3px solid rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    border-top-color: #00e6ff;
    animation: spin 1s linear infinite;
    margin: 0 auto 20px;
  }

  /* Message Styles */
  .message {
    padding: 20px;
    border-radius: 15px;
    margin: 20px 0;
    display: flex;
    align-items: center;
    gap: 15px;
    backdrop-filter: blur(10px);
  }

  .message-error {
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.15), rgba(239, 68, 68, 0.25));
    color: #ef4444;
    border-left: 5px solid #ef4444;
  }

  .message-success {
    background: linear-gradient(135deg, rgba(16, 185, 129, 0.15), rgba(16, 185, 129, 0.25));
    color: #10b981;
    border-left: 5px solid #10b981;
  }

  /* API Categories */
  .category-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 25px;
    margin-bottom: 50px;
  }

  .category-card {
    background: rgba(255, 255, 255, 0.03);
    border-radius: 20px;
    padding: 30px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(10px);
  }

  .category-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
  }

  .category-icon {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 20px;
    box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
  }

  .category-title {
    font-size: 1.5rem;
    font-weight: 800;
    color: white;
  }

  .api-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .api-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 10px;
    transition: all 0.3s;
  }

  .api-item:hover {
    background: rgba(255, 255, 255, 0.05);
    transform: translateX(10px);
    border-left: 3px solid #00e6ff;
  }

  .api-name {
    font-size: 15px;
    color: #e2e8f0;
    font-weight: 500;
  }

  /* VIP Banner */
  .vip-banner {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(217, 119, 6, 0.05));
    border: 1px solid rgba(245, 158, 11, 0.3);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    margin: 50px 0;
    backdrop-filter: blur(10px);
  }

  .vip-badge {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    padding: 12px 30px;
    border-radius: 50px;
    font-weight: 800;
    font-size: 1.3rem;
    margin-bottom: 25px;
    box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 30px;
    color: #64748b;
    font-size: 14px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    margin-top: 40px;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container {
      padding: 15px;
    }

    .dashboard-title {
      font-size: 2.2rem;
    }

    .stats-grid {
      grid-template-columns: 1fr;
    }

    .category-grid {
      grid-template-columns: 1fr;
    }

    .role-warning {
      flex-direction: column;
      text-align: center;
      gap: 15px;
    }

    .upgrade-button {
      margin-left: 0;
      width: 100%;
      justify-content: center;
    }
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
  }

  ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #00e6ff, #8b5cf6);
    border-radius: 4px;
  }
</style>
</head>
<body>
  <!-- Auth Check Overlay -->
  <div class="auth-overlay hidden" id="authOverlay">
    <div class="auth-spinner"></div>
    <div style="color: white; font-size: 18px; font-weight: 600;">GiriÅŸ kontrol ediliyor...</div>
    <div style="color: #94a3b8; font-size: 14px; margin-top: 10px;">LÃ¼tfen bekleyin</div>
  </div>

  <!-- Overlay -->
  <div id="sidebar-overlay" onclick="closeSidebar()"></div>

  <!-- Top Action Buttons -->
  <div class="top-actions">
    <div style="display: flex; flex-direction: column; align-items: center;">
      <button class="action-btn" onclick="toggleSidebar()">
        <i class="fas fa-bars"></i>
      </button>
      <div class="action-label">MenÃ¼</div>
    </div>

    <div style="display: flex; flex-direction: column; align-items: center;">
      <button class="action-btn" onclick="openMarket()">
        <i class="fas fa-crown"></i>
      </button>
      <div class="action-label">VIP</div>
    </div>
  </div>

  <!-- Sidebar -->
  <aside id="sidebar">
    <div class="sidebar-header">
      <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/2220b27b-c04f-48bc-9a37-8ebfbd779b57.png"
           alt="Profil"
           class="user-avatar"
           onerror="this.src='https://ui-avatars.com/api/?name=User&background=0ea5e9&color=fff&size=128'">
      <div class="user-info">
        <div class="username" id="sidebar-username">Ã–ZSOYLAR</div>
        <div class="user-plan" id="sidebar-plan">
          <i class="fas fa-crown"></i>
          <span>Ã–ZSOY SYSTEM Ãœyelik</span>
        </div>
        <!-- Ã‡EVRÄ°MÄ°Ã‡Ä° PROFÄ°L Ä°NDÄ°KATÃ–RÃœ -->
        <div class="profile-status">
          <div class="status-online"></div>
          <span style="color: #10b981; font-weight: 600;">Ã‡evrimiÃ§i</span>
        </div>
      </div>
    </div>

    <div class="nav-section">
      <div class="section-title">Ana MenÃ¼</div>
      <a href="/panel" class="nav-item active">
        <div class="nav-icon"><i class="fas fa-home"></i></div>
        <div class="nav-text">Dashboard</div>
      </a>

      <div class="nav-item" onclick="toggleSubmenu('quick-access')">
        <div class="nav-icon"><i class="fas fa-bolt"></i></div>
        <div class="nav-text">HÄ±zlÄ± EriÅŸim</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-quick-access">
        <a class="submenu-item" onclick="openSorgu('tc')">
          <span>TC Sorgulama</span>
          <span class="nav-badge free">FREE</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('adsoyad')">
          <span>Ad Soyad Sorgu</span>
          <span class="nav-badge free">FREE</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('aile')">
          <span>Aile Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('gsmtc')">
          <span>GSM â†’ TC</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>
    </div>

    <div class="nav-section">
      <div class="section-title">Ãœcretsiz API'ler</div>

      <a class="nav-item" onclick="openSorgu('tc')">
        <div class="nav-icon"><i class="fas fa-id-card"></i></div>
        <div class="nav-text">TC Sorgulama</div>
        <span class="nav-badge free">FREE</span>
      </a>

      <a class="nav-item" onclick="openSorgu('yas')">
        <div class="nav-icon"><i class="fas fa-birthday-cake"></i></div>
        <div class="nav-text">YaÅŸ Sorgulama</div>
        <span class="nav-badge free">FREE</span>
      </a>

      <a class="nav-item" onclick="openSorgu('adsoyad')">
        <div class="nav-icon"><i class="fas fa-user"></i></div>
        <div class="nav-text">Ad Soyad Sorgu</div>
        <span class="nav-badge free">FREE</span>
      </a>
    </div>

    <div class="nav-section">
      <div class="section-title">VIP API'ler</div>

      <div class="nav-item" onclick="toggleSubmenu('vip-tc')">
        <div class="nav-icon"><i class="fas fa-star"></i></div>
        <div class="nav-text">TC Premium</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-tc">
        <a class="submenu-item" onclick="openSorgu('tc2')">
          <span>TC2 Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('burc')">
          <span>BurÃ§ Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('profil')">
          <span>Profil Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tcpro')">
          <span>TC Pro Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-aile')">
        <div class="nav-icon"><i class="fas fa-users"></i></div>
        <div class="nav-text">Aile SorgularÄ±</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-aile">
        <a class="submenu-item" onclick="openSorgu('aile')">
          <span>Aile Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('es')">
          <span>EÅŸ Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('cocuk')">
          <span>Ã‡ocuk Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('erkekcocuk')">
          <span>Erkek Ã‡ocuk</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('kizcocuk')">
          <span>KÄ±z Ã‡ocuk</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('kardes')">
          <span>KardeÅŸ Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('anne')">
          <span>Anne Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('baba')">
          <span>Baba Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('ded')">
          <span>Dede Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('nine')">
          <span>Nine Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('ailepro')">
          <span>Aile Pro Sorgu</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-soy')">
        <div class="nav-icon"><i class="fas fa-tree"></i></div>
        <div class="nav-text">Soy AÄŸacÄ±</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-soy">
        <a class="submenu-item" onclick="openSorgu('sulale')">
          <span>SÃ¼lale Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>                                                                                                                                                    <a class="submenu-item" onclick="openSorgu('soyagaci')">
          <span>SoyaÄŸacÄ± Sorgu</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('kuzen')">
          <span>Kuzen Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('yegen')">
          <span>YeÄŸen Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tamamileagaci')">
          <span>Tam Aile AÄŸacÄ±</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('sulalepro')">
          <span>SÃ¼lale Pro Sorgu</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-gsm')">
        <div class="nav-icon"><i class="fas fa-phone"></i></div>
        <div class="nav-text">GSM & Ä°letiÅŸim</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-gsm">
        <a class="submenu-item" onclick="openSorgu('adres')">
          <span>Adres Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('haneadres')">
          <span>Hane Adresi</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tcgsm')">
          <span>TC â†’ GSM</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('gsmtc')">
          <span>GSM â†’ TC</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('operator')">
          <span>OperatÃ¶r Sorgu</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tcvegsm')">
          <span>TC + GSM</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tumiletisim')">
          <span>TÃ¼m Ä°letiÅŸim</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-vesika')">
        <div class="nav-icon"><i class="fas fa-id-badge"></i></div>
        <div class="nav-text">Vesika Ä°ÅŸlemleri</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-vesika">
        <a class="submenu-item" onclick="openSorgu('vesika')">
          <span>Vesika Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('vesika_download')">
          <span>Vesika Ä°ndirme</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-iban')">
        <div class="nav-icon"><i class="fas fa-money-check"></i></div>
        <div class="nav-text">IBAN Ä°ÅŸlemleri</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-iban">
        <a class="submenu-item" onclick="openSorgu('iban')">
          <span>IBAN Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('iban_sorgulama')">
          <span>IBAN DetaylÄ± Sorgu</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('iban_dogrulama')">
          <span>IBAN DoÄŸrulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('iban_banka_kodlari')">
          <span>Banka KodlarÄ±</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-ihbar')">
        <div class="nav-icon"><i class="fas fa-shield-alt"></i></div>
        <div class="nav-text">Ä°hbar Ä°ÅŸlemleri</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-ihbar">
        <a class="submenu-item" onclick="openSorgu('jandarmaihbar')">
          <span>Jandarma Ä°hbar</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('egmihbar')">
          <span>EGM Ä°hbar</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('usomihbar')">
          <span>USOM Ä°hbar</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>

      <!-- YENÄ° EKLENEN KISIM: SIZMA Ä°ÅžLEMLERÄ° -->
      <div class="nav-item" onclick="toggleSubmenu('vip-sizma')">
        <div class="nav-icon"><i class="fas fa-skull-crossbones"></i></div>
        <div class="nav-text">SÄ±zma Ä°ÅŸlemleri</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-sizma">
        <a class="submenu-item" onclick="openSorgu('instagram')">
          <span>Instagram Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('facebook')">
          <span>Facebook Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('netflix')">
          <span>Netflix Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('tiktok')">
          <span>TikTok Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('twitter')">
          <span>Twitter Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('google')">
          <span>Google Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('microsoft')">
          <span>Microsoft Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('spotify')">
          <span>Spotify Ã‡alma</span>
          <span class="nav-badge danger">SIZMA</span>
        </a>
      </div>

      <div class="nav-item" onclick="toggleSubmenu('vip-other')">
        <div class="nav-icon"><i class="fas fa-cogs"></i></div>
        <div class="nav-text">DiÄŸer Premium</div>
        <div class="nav-icon"><i class="fas fa-chevron-down"></i></div>
      </div>

      <div class="submenu" id="submenu-vip-other">
        <a class="submenu-item" onclick="openSorgu('adsoyadpro')">
          <span>Ad Soyad Pro</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('log')">
          <span>Log Sorgulama</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('cocuksayisi')">
          <span>Ã‡ocuk SayÄ±sÄ±</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('kardessayisi')">
          <span>KardeÅŸ SayÄ±sÄ±</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('ailebuyuklugu')">
          <span>Aile BÃ¼yÃ¼klÃ¼ÄŸÃ¼</span>
          <span class="nav-badge">VIP</span>
        </a>
        <a class="submenu-item" onclick="openSorgu('adresvegsm')">
          <span>Adres ve GSM</span>
          <span class="nav-badge">VIP</span>
        </a>
      </div>
    </div>

    <div class="nav-section">
      <div class="section-title">Hesap</div>

      <a class="nav-item" onclick="openMarket()">
        <div class="nav-icon"><i class="fas fa-crown"></i></div>
        <div class="nav-text">VIP Ol</div>
        <span class="nav-badge" style="background:linear-gradient(135deg,#f59e0b,#d97706)">YÃœKSELT</span>
      </a>

      <a class="nav-item" onclick="logout()">
        <div class="nav-icon"><i class="fas fa-sign-out-alt"></i></div>
        <div class="nav-text">Ã‡Ä±kÄ±ÅŸ Yap</div>
      </a>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="main-content" id="main-content">
    <div class="container">
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <h1 class="dashboard-title" id="main-title">HoÅŸ Geldin, <span id="dashboardUsername">KullanÄ±cÄ±</span>! ðŸ‘‹</h1>
        <p class="dashboard-subtitle" id="main-description">TÃ¼rkiye'nin en gÃ¼Ã§lÃ¼ ve gÃ¼venilir sorgu platformu. TC Kimlik, GSM, Aile, SÄ±zma Ä°ÅŸlemleri ve daha birÃ§ok veritabanÄ±na anÄ±nda eriÅŸim saÄŸlayÄ±n.</p>
      </div>

      <!-- Role Warning (for free users) -->
      <div class="role-warning" id="roleWarning">
        <i class="fas fa-crown"></i>
        <div>
          <strong>FREE Ãœyesiniz!</strong> Sadece Ã¼cretsiz sorgulara eriÅŸebilirsiniz. VIP Ã¶zelliklere eriÅŸmek iÃ§in paket yÃ¼kseltmesi yapÄ±n.
        </div>
        <button class="upgrade-button" onclick="openMarket()">
          <i class="fas fa-arrow-up"></i>
          VIP YÃœKSELT
        </button>
      </div>

      <!-- API Key Warning -->
      <div class="message message-error" id="apiKeyWarning" style="display: none;">
        <i class="fas fa-exclamation-triangle"></i>
        <strong>API AnahtarÄ± Gerekli:</strong> Sorgu yapabilmek iÃ§in Ã¶nce API anahtarÄ±nÄ±zÄ± girmeniz gerekmektedir. LÃ¼tfen "API AyarlarÄ±" sayfasÄ±na gidin.
      </div>

      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-coins"></i>
            </div>
            <div class="card-change">Kalan</div>
          </div>
          <div class="card-value" id="dashboardCredits">0</div>
          <div class="card-label">Kredi Bakiyesi</div>
        </div>

        <div class="stat-card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-user"></i>
            </div>
            <div class="card-change">Ãœyelik</div>
          </div>
          <div class="card-value" id="dashboardRole">FREE</div>
          <div class="card-label">Ãœyelik TÃ¼rÃ¼</div>
        </div>

        <div class="stat-card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-search"></i>
            </div>
            <div class="card-change">EriÅŸim</div>
          </div>
          <div class="card-value" id="freeQueriesCount">3</div>
          <div class="card-label">Ãœcretsiz Sorgu</div>
        </div>

        <div class="stat-card">
          <div class="card-header">
            <div class="card-icon">
              <i class="fas fa-crown"></i>
            </div>
            <div class="card-change">Premium</div>
          </div>
          <div class="card-value" id="vipQueriesCount">45+</div>
          <div class="card-label">VIP Sorgu</div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="quick-btn" onclick="openSorgu('tc')">
          <i class="fas fa-id-card" style="font-size: 28px; margin-bottom: 15px;"></i>
          <div>TC Sorgula</div>
          <div style="font-size: 13px; color: #94a3b8; margin-top: 8px;">Ãœcretsiz</div>
        </div>

        <div class="quick-btn" onclick="openSorgu('adsoyad')">
          <i class="fas fa-user" style="font-size: 28px; margin-bottom: 15px;"></i>
          <div>Ad Soyad Sorgu</div>
          <div style="font-size: 13px; color: #94a3b8; margin-top: 8px;">Ãœcretsiz</div>
        </div>

        <div class="quick-btn" onclick="openSorgu('aile')">
          <i class="fas fa-users" style="font-size: 28px; margin-bottom: 15px;"></i>
          <div>Aile Sorgula</div>
          <div style="font-size: 13px; color: #94a3b8; margin-top: 8px;">VIP</div>
        </div>

        <div class="quick-btn" onclick="openSorgu('instagram')">
          <i class="fas fa-skull" style="font-size: 28px; margin-bottom: 15px;"></i>
          <div>Instagram Ã‡alma</div>
          <div style="font-size: 13px; color: #ef4444; margin-top: 8px;">SIZMA</div>
        </div>
      </div>

      <!-- API Categories -->
      <div class="category-grid">
        <div class="category-card">
          <div class="category-header">
            <div class="category-icon">
              <i class="fas fa-id-card"></i>
            </div>
            <div class="category-title">TC SorgularÄ±</div>
          </div>
          <div class="api-list">
            <div class="api-item" onclick="openSorgu('tc')">
              <span class="api-name">TC Sorgulama</span>
              <span class="nav-badge free">FREE</span>
            </div>
            <div class="api-item" onclick="openSorgu('yas')">
              <span class="api-name">YaÅŸ Sorgulama</span>
              <span class="nav-badge free">FREE</span>
            </div>
            <div class="api-item" onclick="openSorgu('tc2')">
              <span class="api-name">TC2 Sorgulama</span>
              <span class="nav-badge">VIP</span>
            </div>
            <div class="api-item" onclick="openSorgu('tcpro')">
              <span class="api-name">TC Pro Sorgulama</span>
              <span class="nav-badge">VIP</span>
            </div>
          </div>
        </div>

        <div class="category-card">
          <div class="category-header">
            <div class="category-icon" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
              <i class="fas fa-users"></i>
            </div>
            <div class="category-title">Aile SorgularÄ±</div>
          </div>
          <div class="api-list">
            <div class="api-item" onclick="openSorgu('aile')">
              <span class="api-name">Aile Sorgulama</span>
              <span class="nav-badge">VIP</span>
            </div>
            <div class="api-item" onclick="openSorgu('es')">
              <span class="api-name">EÅŸ Sorgulama</span>
              <span class="nav-badge">VIP</span>
            </div>
            <div class="api-item" onclick="openSorgu('cocuk')">
              <span class="api-name">Ã‡ocuk Sorgulama</span>
              <span class="nav-badge">VIP</span>
            </div>
            <div class="api-item" onclick="openSorgu('ailepro')">
              <span class="api-name">Aile Pro Sorgu</span>
              <span class="nav-badge">VIP</span>
            </div>
          </div>
        </div>

        <div class="category-card">
          <div class="category-header">
            <div class="category-icon" style="background: linear-gradient(135deg, #ef4444, #dc2626);">
              <i class="fas fa-skull-crossbones"></i>
            </div>
            <div class="category-title">SÄ±zma Ä°ÅŸlemleri</div>
          </div>
          <div class="api-list">
            <div class="api-item" onclick="openSorgu('instagram')">
              <span class="api-name">Instagram Ã‡alma</span>
              <span class="nav-badge danger">SIZMA</span>
            </div>
            <div class="api-item" onclick="openSorgu('facebook')">
              <span class="api-name">Facebook Ã‡alma</span>
              <span class="nav-badge danger">SIZMA</span>
            </div>
            <div class="api-item" onclick="openSorgu('netflix')">
              <span class="api-name">Netflix Ã‡alma</span>
              <span class="nav-badge danger">SIZMA</span>
            </div>
            <div class="api-item" onclick="openSorgu('google')">
              <span class="api-name">Google Ã‡alma</span>
              <span class="nav-badge danger">SIZMA</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Sorgu Sistemine YÃ¶nlendirme -->
      <div class="results-container">
        <div class="results-header">
          <div class="results-title">
            <i class="fas fa-search"></i>
            Hemen Sorgu Yapmaya BaÅŸlayÄ±n
          </div>
        </div>

        <div style="text-align: center; padding: 40px 20px;">
          <div style="margin-bottom: 30px;">
            <p style="color: #94a3b8; font-size: 18px; margin-bottom: 25px;">
              TÃ¼m sorgu iÅŸlemlerini yapmak iÃ§in sorgu sayfasÄ±na gidin. Ãœcretsiz Ã¼yeler sadece FREE etiketli sorgularÄ±, VIP Ã¼yeler tÃ¼m sorgularÄ± kullanabilir.
            </p>
          </div>

          <button onclick="window.location.href='sorgu.html'" style="background: linear-gradient(135deg, #00e6ff, #8b5cf6); color: white; border: none; padding: 18px 45px; border-radius: 50px; font-weight: 700; font-size: 1.2rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 10px 25px rgba(0, 230, 255, 0.3);">
            <i class="fas fa-arrow-right"></i> SORGULAMA SAYFASINA GÄ°T
          </button>
        </div>
      </div>

      <!-- VIP Banner -->
      <div class="vip-banner">
        <div class="vip-badge">
          <i class="fas fa-crown"></i>
          VIP ÃœYELÄ°K KAZANIN
        </div>
        <h2 style="font-size: 2.5rem; font-weight: 800; color: white; margin-bottom: 20px;">Premium Ã–zelliklere EriÅŸin</h2>
        <p style="color: #fde68a; max-width: 700px; margin: 0 auto 30px; line-height: 1.6; font-size: 1.2rem;">
          45+ premium API'ye sÄ±nÄ±rsÄ±z eriÅŸim. Aile sorgularÄ±, GSM bilgileri, soy aÄŸacÄ±, vesika sorgularÄ± ve <strong>SÄ±zma Ä°ÅŸlemleri</strong> dahil!
        </p>
        <button onclick="openMarket()" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border: none; padding: 18px 50px; border-radius: 50px; font-weight: 800; font-size: 1.3rem; cursor: pointer; transition: all 0.3s; box-shadow: 0 15px 30px rgba(245, 158, 11, 0.3);">
          <i class="fas fa-star"></i> HEMEN VIP OL
        </button>
      </div>

      <!-- Recent Activity -->
      <div class="results-container" id="recentActivity">
        <div class="results-header">
          <div class="results-title">
            <i class="fas fa-history"></i>
            Son Sorgu GeÃ§miÅŸiniz
          </div>
          <div class="api-info">Sorgu yapmadÄ±nÄ±z</div>
        </div>

        <div class="results-content">
          <div class="loading">
            <div class="loading-spinner"></div>
            <p>HenÃ¼z sorgu geÃ§miÅŸiniz bulunmuyor</p>
            <p style="margin-top: 10px; color: #94a3b8; font-size: 15px;">
              Ä°lk sorgunuzu yapmak iÃ§in "Sorgulama SayfasÄ±na Git" butonuna tÄ±klayÄ±n.
            </p>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer">
        <p>Â© 2024 Ã–ZSOY Sorgu Platformu. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        <p style="margin-top: 10px; font-size: 0.9rem; color: #94a3b8;">
          <i class="fas fa-shield-alt"></i>
          <span>%100 GÃ¼venli â€¢ SSL Åžifreleme</span>
        </p>
      </div>
    </div>
  </div>

<script>
// *** GÃœNCELLENMÄ°Åž JAVASCRIPT - SIZMA Ä°ÅžLEMLERÄ° EKLENDÄ° ***

// Global Variables
let currentUser = null;
let userCredits = 0;
let userRole = 'free';
let isVipUser = false;

// Yeni eklenen VIP API'leri kontrol listesine ekle
const vipApis = [
    'tc2', 'burc', 'profil', 'aile', 'es', 'cocuk', 'erkekcocuk',
    'kizcocuk', 'kardes', 'anne', 'baba', 'ded', 'nine', 'sulale',
    'soyagaci', 'kuzen', 'yegen', 'tamamileagaci', 'adres', 'haneadres',
    'tcgsm', 'gsmtc', 'operator', 'tcvegsm', 'tumiletisim', 'iban',
    'adsoyadpro', 'log', 'cocuksayisi', 'kardessayisi', 'ailebuyuklugu', 'adresvegsm',
    // YENÄ° EKLENEN API'LER
    'sulalepro', 'ailepro', 'tcpro', 'vesika', 'vesika_download',
    'iban_sorgulama', 'iban_dogrulama', 'iban_banka_kodlari',
    'jandarmaihbar', 'egmihbar', 'usomihbar',                                                                                                               // SIZMA Ä°ÅžLEMLERÄ°                                                                                                                                      'instagram', 'facebook', 'netflix', 'tiktok', 'twitter',                                                                                                'google', 'microsoft', 'spotify'
];

const freeApis = ['tc', 'yas', 'adsoyad'];

// 1. MENÃœ FONKSÄ°YONLARI
function toggleSidebar() {
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('sidebar-overlay');
    const mainContent = document.getElementById('main-content');

    sidebar.classList.toggle('active');
    overlay.classList.toggle('active');
    mainContent.classList.toggle('sidebar-open');
}

function closeSidebar() {
    document.getElementById('sidebar').classList.remove('active');
    document.getElementById('sidebar-overlay').classList.remove('active');
    document.getElementById('main-content').classList.remove('sidebar-open');
}

function toggleSubmenu(id) {
    const submenu = document.getElementById('submenu-' + id);
    if (submenu) {
        submenu.classList.toggle('active');

        // Chevron'u dÃ¶ndÃ¼r
        const parent = document.querySelector(`[onclick="toggleSubmenu('${id}')"]`);
        const chevron = parent.querySelector('.fa-chevron-down');
        if (chevron) {
            chevron.style.transform = submenu.classList.contains('active') ? 'rotate(180deg)' : 'rotate(0deg)';
        }
    }
}

// 2. SORGU SAYFASINI AÃ‡ - VIP KONTROL GÃœNCELLENDÄ°
async function openSorgu(apiName) {
    console.log('API aÃ§Ä±lÄ±yor:', apiName);

    // API planÄ±nÄ± kontrol et
    if (vipApis.includes(apiName)) {
        try {
            // KullanÄ±cÄ± bilgilerini al                                                                                                                             const response = await fetch('/api/user');
            if (!response.ok) {
                console.error('KullanÄ±cÄ± bilgileri alÄ±namadÄ±');
                window.location.href = '/login';
                return;
            }

            const user = await response.json();

            if (!user.logged_in) {
                window.location.href = '/login';
                return;
            }

            // KullanÄ±cÄ± VIP mi? (plan free deÄŸilse VIP)
            const isVip = user.plan !== 'free';

            if (!isVip) {
                if (apiName.includes('instagram') || apiName.includes('facebook') ||
                    apiName.includes('twitter') || apiName.includes('google') ||
                    apiName.includes('netflix') || apiName.includes('tiktok') ||
                    apiName.includes('microsoft') || apiName.includes('spotify')) {
                    alert('ðŸš« SÄ±zma iÅŸlemleri iÃ§in VIP Ã¼yelik gereklidir!');
                } else {
                    alert('ðŸš« Bu API iÃ§in VIP Ã¼yelik gereklidir!');
                }

                if (confirm('VIP sayfasÄ±na yÃ¶nlendirilsin mi?')) {
                    openMarket();
                }
                return;
            }
        } catch (error) {
            console.error('VIP kontrol hatasÄ±:', error);
            alert('VIP kontrolÃ¼ yapÄ±lÄ±rken hata oluÅŸtu');
            return;
        }
    }

    // DoÄŸrudan sorgu sayfasÄ±nÄ± aÃ§ - API ismini sorgu.html'ye gÃ¶nder
    window.location.href = `/sorgu.html?api=${encodeURIComponent(apiName)}`;
}

// 3. MARKET SAYFASI
function openMarket() {
    window.location.href = '/abonelik.html';
}

// 4. Ã‡IKIÅž YAP
function logout() {
    if (confirm('Ã‡Ä±kÄ±ÅŸ yapmak istediÄŸinize emin misiniz?')) {
        window.location.href = '/logout';
    }
}

// 5. Check Authentication
async function checkAuth() {
    console.log('Authentication check started...');

    const authOverlay = document.getElementById('authOverlay');
    if (authOverlay) {
        authOverlay.classList.remove('hidden');
        authOverlay.style.display = 'flex';
    }

    try {
        const response = await fetch('/api/user');
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        const user = await response.json();

        if (user.logged_in) {
            currentUser = user;
            userCredits = user.credits || 0;
            userRole = user.plan || 'free';
            isVipUser = userRole !== 'free';

            updateUserUI();

            // Hide auth overlay
            if (authOverlay) {
                authOverlay.classList.add('hidden');
                setTimeout(() => {
                    authOverlay.style.display = 'none';
                }, 300);
            }

            // Update stats counters
            updateStatsCounters();
        } else {
            // Not logged in, redirect to login
            window.location.href = '/login';
        }
    } catch (error) {
        console.error('Auth check error:', error);

        // Hide auth overlay even on error
        if (authOverlay) {
            authOverlay.classList.add('hidden');
            setTimeout(() => {
                authOverlay.style.display = 'none';
            }, 300);
        }

        // Try to check local storage
        const savedUser = localStorage.getItem('app_user');
        if (savedUser) {
            try {
                const user = JSON.parse(savedUser);
                currentUser = user;
                userCredits = user.credits || 0;
                userRole = user.plan || 'free';
                isVipUser = userRole !== 'free';

                updateUserUI();
                updateStatsCounters();
            } catch (e) {
                console.error('LocalStorage parse error:', e);
            }
        }
    }
}

// 6. Update user UI
function updateUserUI() {
    if (!currentUser) return;

    console.log('Updating UI for user:', currentUser.username);

    // Update username everywhere
    document.getElementById('sidebar-username').textContent = currentUser.username || 'KullanÄ±cÄ±';
    document.getElementById('dashboardUsername').textContent = currentUser.username || 'KullanÄ±cÄ±';
    document.getElementById('main-title').textContent = `HoÅŸ Geldin, ${currentUser.username || 'KullanÄ±cÄ±'}!`;

    // Update plan/role
    const isVip = isVipUser;
    const planElement = document.getElementById('sidebar-plan');

    if (isVip) {
        planElement.innerHTML = '<i class="fas fa-crown"></i><span>VIP Ãœyelik</span>';
        planElement.style.background = 'linear-gradient(90deg, rgba(245, 158, 11, 0.3), rgba(217, 119, 6, 0.2))';
        planElement.style.color = '#fbbf24';

        document.getElementById('main-description').textContent = 'VIP Ã¼ye olarak tÃ¼m API\'lere (SÄ±zma Ä°ÅŸlemleri dahil) eriÅŸiminiz var!';
        document.getElementById('dashboardRole').textContent = 'VIP';
        document.getElementById('roleWarning').style.display = 'none';
        document.getElementById('freeQueriesCount').textContent = '3';
        document.getElementById('vipQueriesCount').textContent = '45+';
    } else {
        planElement.innerHTML = '<i class="fas fa-user"></i><span>Ãœcretsiz Ãœyelik</span>';
        planElement.style.background = 'linear-gradient(90deg, rgba(100, 116, 139, 0.3), rgba(71, 85, 105, 0.2))';
        planElement.style.color = '#94a3b8';

        document.getElementById('main-description').textContent = 'Ãœcretsiz Ã¼ye olarak sÄ±nÄ±rlÄ± API\'lere eriÅŸebilirsiniz. VIP olun!';
        document.getElementById('dashboardRole').textContent = 'FREE';
        document.getElementById('roleWarning').style.display = 'flex';
        document.getElementById('freeQueriesCount').textContent = '3';
        document.getElementById('vipQueriesCount').textContent = '45+';
    }

    // Update credits
    userCredits = currentUser.credits || 0;
    document.getElementById('dashboardCredits').textContent = userCredits;

    // User info'yu localStorage'a kaydet
    localStorage.setItem('app_user', JSON.stringify(currentUser));
}

// 7. Update stats counters
function updateStatsCounters() {
    // Ä°statistikleri gÃ¼ncelle
    const isVip = isVipUser;
    const totalApis = 48; // 3 free + 45 vip
    const availableApis = isVip ? totalApis : 3;

    // Counter animasyonlarÄ± baÅŸlat
    animateCounter('freeQueriesCount', 3);
    animateCounter('vipQueriesCount', 45);
}

// 8. SAYFA YÃœKLENÄ°NCE
document.addEventListener('DOMContentLoaded', function() {
    console.log('Ã–ZSOY Panel yÃ¼klendi');

    // MenÃ¼ butonlarÄ±nÄ± baÄŸla
    document.getElementById('menu-button').onclick = toggleSidebar;

    // Auth kontrolÃ¼ yap
    checkAuth();

    // ESC tuÅŸu ile menÃ¼yÃ¼ kapat
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeSidebar();
        }
    });

    // API listesini yÃ¼kle
    loadAPIs();
});

// 9. API LÄ°STESÄ°NÄ° YÃœKLE
async function loadAPIs() {
    try {
        const response = await fetch('/api/list');
        if (response.ok) {
            const data = await response.json();

            // Ä°statistikleri gÃ¼ncelle
            const totalApis = data.total_apis || 48;
            const vipApis = data.vip_apis || 45;

            // Counter animasyonlarÄ±
            animateCounter('total-apis', totalApis);
            animateCounter('vip-apis', vipApis);
        } else {
            console.log('API listesi backend\'den alÄ±namadÄ±, fallback kullanÄ±lÄ±yor');
            // Fallback values
            animateCounter('total-apis', 48);
            animateCounter('vip-apis', 45);
        }
    } catch (error) {
        console.error('API yÃ¼kleme hatasÄ±:', error);
        // Fallback values
        animateCounter('total-apis', 48);
        animateCounter('vip-apis', 45);
    }
}

// 10. ANÄ°MASYONLU SAYAÃ‡
function animateCounter(elementId, target) {
    const element = document.getElementById(elementId);
    if (!element) return;

    let current = 0;
    const increment = target / 50;
    const duration = 1000; // 1 saniye
    const interval = duration / 50;

    const timer = setInterval(() => {
        current += increment;
        if (current >= target) {
            element.textContent = Math.round(target);
            clearInterval(timer);
        } else {
            element.textContent = Math.round(current);
        }
    }, interval);
}

// 11. SAYFA YENÄ°LEME
function refreshPage() {
    window.location.reload();
}

// 12. ESC tuÅŸu ile menÃ¼ kapatma
document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape') {
        closeSidebar();
    }
});

// Yeni eklenen API'leri kontrol eden fonksiyon
async function checkVipAccess(apiName) {
    try {
        const response = await fetch('/api/user');
        if (!response.ok) return false;

        const user = await response.json();
        return user.logged_in && user.plan !== 'free';
    } catch (error) {
        console.error('VIP eriÅŸim kontrol hatasÄ±:', error);
        return false;
    }
}

// Sayfa yÃ¼klendiÄŸinde tÃ¼m sayaÃ§larÄ± baÅŸlat
window.addEventListener('load', function() {
    // Auth kontrolÃ¼ zaten yapÄ±lÄ±yor, ek iÅŸlem yapma
});
</script>
</body>
</html>
